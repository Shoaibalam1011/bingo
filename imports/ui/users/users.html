
<template name="users">
  <div class="container">
    <div class="row">
      <h2>Online Users</h2>
      <p>
        works to be done:
        #show users who are not playing currently
        #show users with go to existing games button
        #show notifications on games cancellation and acceptance
      </p>
      <div class="col-md-6">
        {{#if currentUser}}
        {{#if Template.subscriptionsReady}}
            <div id="users">
              <input class="search form-control" placeholder="Search by username" autocomplete="on" autofocus/>
              <br>
              <button class="sort btn btn-default pull-right" data-sort="name">
                Sort by name
              </button>
              <hr>

              <ol class="list">

                {{#each usersList}}
                <li>

                {{#if user.username}}
                <span class="name">{{user.username}}</span>
                {{else}}
                <span class="name">{{user.profile.name}}</span>
                {{/if}}
                {{#if isNull userStatus }}
                <button type="button" id="btn-create" class="btn btn-xs btn-info">start a new game</button>
                {{else}}
                  {{#if userStatus }}
                  <button type="button" id="btn-cancel" class="btn btn-xs btn-danger">Cancel request</button>
                  {{else}}
                  <button type="button" id="btn-accept" class="btn btn-xs btn-success">Accept request</button>
                  <button type="button" id="btn-decline" class="btn btn-xs btn-danger">Decline request</button>
                  {{/if}}
                {{/if}}
                  <br>
                </li>
                {{/each}}

              </ol>

            </div>


        	<script src="http://listjs.com/no-cdn/list.js"></script>
            <script type="text/javascript">
            var options = {
              valueNames: [ 'name' ]
              };

            var userList = new List('users', options);
            </script>
        {{else}}
          {{>spinner}}
        {{/if}}
        {{/if}}

      </div>
    </div>
  </div>
</template>
